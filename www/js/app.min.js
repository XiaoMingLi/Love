angular.module("Love",["ngRoute","LocalStorageModule","flow"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,o,t,r,n){angular.forEach(n.interceptor,function(o){var t=o.replace(/_[a-z]/g,function(e){return e.split("_")[1].toUpperCase()});t+="Controller",e.when("/"+o,{templateUrl:"templates/"+o+".html",reloadOnSearch:!1,controller:t,resolve:{user:["$q","$location","localStorageService",function(e,t,r){var n=[],s=e.defer();return n.includes(o)&&!r.get("token")?(s.reject(),t.path("/signin").replace(),void 0):(s.resolve(),s.promise)}]}})}),e.otherwise("/ta"),o.defaults.useXDomain=!0,o.defaults.withCredentials=!0,delete o.defaults.headers.common["X-Requested-With"],r.setStorageCookie(.02),o.interceptors.push("tokenInterceptor")}]).run(["appServices",function(e){e.init()}]),angular.module("Love").factory("userServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,o,t,r,n){return{rsa_key:t._get(angular.extend({},n.common_params,{url:"key/private_key.pem"})),signin:t._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/Login"})),signup:t._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/RegistTel"})),forget:t._get(angular.extend({},n.common_params,{url:n.url+"/api_url"})),reset:t._get(angular.extend({},n.common_params,{url:n.url+"/api_url"})),get_smscode:t._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/getRegisterCode"})),query_basicinfo:t._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/baseInfo",token:r.get("token")})),query_userinfo:t._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/userInfo",token:r.get("token")})),save_inner_word:t._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/userInfo",token:r.get("token")})),realname_authen:t._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/updateRealNameAuth",token:r.get("token")})),phone_authen:t._get(angular.extend({},n.common_params,{url:n.url+"/app/UserCenter/updateTelephoneAuth",token:r.get("token")})),like:t._get(angular.extend({},n.common_params,{url:n.url+"/app/Home/addLove",token:r.get("token")})),unlike:t._get(angular.extend({},n.common_params,{url:n.url+"/app/Home/deleteLove",token:r.get("token")})),yue:t._get(angular.extend({},n.common_params,{url:n.url+"/app/TrystManage/addTryst",token:r.get("token")})),query_messages:t._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/chatMessageList",token:r.get("token")})),query_send_messages:t._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/sendOutList",token:r.get("token")})),query_message_by_id:t._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/chatMessageList",token:r.get("token")})),send:t._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/sendContent",token:r.get("token")})),block:t._get(angular.extend({},n.common_params,{url:n.url+"/app/ChatManage/setShield",token:r.get("token")})),charge:t._get(angular.extend({},n.common_params,{url:n.url+"/api_url",token:r.get("token")})),query_visitors:t._get(angular.extend({},n.common_params,{url:n.url+"/api_url",token:r.get("token")})),query_lovers:t._get(angular.extend({},n.common_params,{url:n.url+"/app/LoveManage/loveEachOtherList",token:r.get("token")})),query_metting:t._get(angular.extend({},n.common_params,{url:n.url+"/api_url",token:r.get("token")})),confirm_adate:t._get(angular.extend({},n.common_params,{url:n.url+"/api_url",token:r.get("token")})),report:t._get(angular.extend({},n.common_params,{url:n.url+"/api_url",token:r.get("token")}))}}]),angular.module("Love").factory("tokenInterceptor",["$location","$q","localStorageService","errorServices","config",function(e,o,t,r,n){return{request:function(e){return e},requestError:function(){},response:function(r){var s=o.defer();return r.config.url.indexOf(".html")>0?r:r.data.code==n.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),t.remove("token"),e.path("/signin").replace(),s.promise):r},responseError:function(e){var t=o.defer();return r.requestError(e.data,e.status,e.headers,e.config),t.promise}}}]),angular.module("Love").factory("toastServices",function(){return{show:function(){$(".toast").show()},hide:function(){$(".toast").hide()},start:function(){NProgress.start()},done:function(){NProgress.done()}}}),angular.module("Love").factory("loveServices",["$http","apiServices","localStorageService","config",function(e,o,t,r){return{query_loves:o._get(angular.extend({},r.common_params,{url:r.url+"/app/Home/taList"})),query_love_by_id:o._get(angular.extend({},r.common_params,{url:r.url+"/api_url"})),query_province:o._get(angular.extend({},r.common_params,{url:"city/province.json"})),query_city:o._get(angular.extend({},r.common_params,{url:"city/city.json"})),query_tags:o._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/interestTalentInfo"})),query_tags:o._get(angular.extend({},r.common_params,{url:r.url+"/app/UserCenter/interestTalentInfo"})),query_vips:o._get(angular.extend({},r.common_params,{url:r.url+"/app/Pays/vipPrices"}))}}]),angular.module("Love").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,o,t){return{show:function(o){e.error_msg=o,$(".error-msg").show()},hide:function(){e.error_msg="",$(".error-msg").hide()},autoHide:function(t){e.error_msg=t,$(".error-msg").show(),o(function(){e.error_msg="",$(".error-msg").hide()},3e3)},requestError:function(e,o,r,n){switch(t.hide(),o){case 0:this.autoHide("连接超时");break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(o),console.log(e),console.log(r),console.log(n),console.log("onRequestError end")}}}]),angular.module("Love").directive("errSrc",function(){return{restrict:"A",link:function(e,o,t){$(o).bind("error",function(){$(o).attr("src",t.errSrc)})}}}),angular.module("Love").factory("appServices",["$rootScope","$window","$location","errorServices","toastServices","config",function(e,o,t,r,n,s){var i=function(){},a=function(e,o,t){n.hide(),r.hide(),c(e,o,t)},u=function(){},c=function(){};return{init:function(){e.$on("$routeChangeStart",i),e.$on("$routeChangeSuccess",a),e.$on("$routeChangeError",u),e.go=function(e){t.path(e)},e.back=function(){o.history.back()},e.staticImageUrl=s.imageUrl}}}]),angular.module("Love").factory("apiServices",["$http",function(e){return{_get:function(o){return function(t){return e({url:o.url,method:"GET",params:angular.extend({},o,t)}).then(function(e){return e.data})}},_post:function(o){return function(t){return e({url:o.url,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var o=[];for(var t in e)o.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return o.join("&")},data:angular.extend({},o,t)}).then(function(e){return e.data})}}}}]),angular.module("Love").directive("showOnLoaded",function(){return{link:function(e,o){var t=parseFloat(e.$eval($(o).parent().attr("data-rate")));$(o).css({visibility:"hidden"});var r="../images/default.png",n={display:"block",width:$(o).parent().width()||$(o).parent().parent().width(),overflow:"hidden","text-align":"center","background-image":"url("+r+")","background-size":"100%","background-position":"center center","line-height":($(o).parent().width()||$(o).parent().parent().width())/t+"px",height:($(o).parent().width()||$(o).parent().parent().width())/t};$(o).parent().css(n),o.bind("load",function(){if(console.log("loaded"),!t)return console.log("unexpect rate"),void 0;var e=$(o).width()/$(o).height();t>e?$(o).css({display:"inline-block",height:"100%",width:"auto"}):$(o).css({display:"inline-block",height:"auto",width:"100%"}),$(o).parent().css({background:"none"}),$(o).css({visibility:"visible"})})}}}),angular.module("Love").directive("imageview",function(){return{restrict:"AE",scope:{src:"="},template:"<img ng-src='{{src}}' show-on-loaded err-src='../images/banner.png'>",link:function(e,o){var t="../images/default.png",r=parseFloat(e.$eval($(o).attr("data-rate")));if(!r)return console.log("unexpect rate"),void 0;var n={display:"block",width:$(o).width()||$(o).parent().width(),overflow:"hidden","text-align":"center","background-image":"url("+t+")","background-size":"100%","background-position":"center center","line-height":($(o).width()||$(o).parent().width())/r+"px",height:($(o).width()||$(o).parent().width())/r};$(o).css(n),$(o).parent().css({overflow:"hidden"})}}}),angular.module("Love").directive("dribehanceHeader",function(){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"=",backAction:"="},link:function(){}}}),angular.module("Love").directive("dribehanceFooter",function(){return{restrict:"E",templateUrl:"templates/footer.html",scope:{active:"="},link:function(){}}}),angular.module("Love").directive("countdown",["$interval",function(e){return{restrict:"E",scope:{countdown:"=",disabled:"=countdownDisabled"},link:function(o,t){function r(){var t=o.countdown.message,r=parseFloat(o.countdown.count)?parseFloat(o.countdown.count):60;n=!0,o.$apply(function(){o.countdown.message=r--,o.countdown.mode="disabled",o.countdown.reset=!1,o.countdown.callback()});var s=e(function(){o.countdown.message=r--,(0>r||o.countdown.reset)&&(e.cancel(s),o.countdown.message=t,n=!1)},1e3)}var n=!1;$(t).bind("click",function(){o.disabled||n||r()})}}}]),angular.module("Love").controller("withdrawalsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("visitorsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("visitorsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("tagsController",["$scope","$rootScope","$routeParams","$timeout","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a,u){e.select=function(e){e.select=!e.select},t.type||o.back(),i.show(),n.query_tags({type:t.type}).then(function(o){i.hide(),o.code==u.request.SUCCESS&&o.status==u.response.SUCCESS?(e.tags=o.Result.InterestTalentInfos,e.tags.map(function(e){return e.name=e.field_name,e.select=!1,e})):s.autoHide(o.message)}),e.save=function(){i.show(),n.save_tags({}).then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?r(function(){o.back()},2e3):s.autoHide(e.message)})}}]),angular.module("Love").controller("taController",["$scope","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s){e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.loves=[],e.page={pn:1,page_size:5,message:"点击加载更多"},e.loadMore=function(){e.no_more||(r.show(),e.page.message="正在加载...",o.query_loves(e.page).then(function(o){r.hide(),e.page.message="点击加载更多",o.code==s.request.SUCCESS&&o.status==s.response.SUCCESS?(e.loves=e.loves.concat(o.Result.Users.list),e.no_more=e.loves.length==o.Result.Users.totalRow?!0:!1):t.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.loves.length+"条记录"),e.page.pn++}))},e.loadMore(),e.get_tag=function(e){return e.split("#")}}]),angular.module("Love").controller("singleController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("signupController",["$scope","$rootScope","$location","$timeout","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a,u,c){e.step=1,e.input={},e.show_step=function(o){e.step=o},e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.get_smscode=function(){a.show(),n.get_smscode({telephone:e.input.telephone}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?i.autoHide(e.message):i.autoHide(e.message)})},e.$on("upload_success",function(o,t){e.input.filename=t.message}),e.input.gender=1,e.select_gender=function(o){e.input.gender=o},s.query_province().then(function(o){e.provinces=o.province,e.input.province=e.provinces[0]}),e.$watch("input.province",function(o){void 0!==o&&e.query_city(o)}),e.query_city=function(o){s.query_city().then(function(t){e.cities=t[o],e.input.city=e.cities[0]})};for(var l=145,p=[],g=0;60>g;g++)l++,p.push(l+"cm");e.heights=p,e.input.height=e.heights[0],e.input.ages="20-22岁",e.input.degree="初中以上",e.input.marry="未婚",e.input.income="5000元以下",e.ajaxForm=function(){a.show(),n.rsa_key().then(function(o){var t=new JSEncrypt,r=o;t.setPrivateKey(r);var n=t.encrypt(e.input.password);e.input.password=n}).then(function(){n.signup({fileName:e.input.filename,telephone:e.input.telephone,password:e.input.password,tel_code:e.input.sms_code,sex:e.input.gender,nickname:e.input.nickname,province:e.input.province,city:e.input.city,height:e.input.height,edu:e.input.degree,marry:e.input.marry,income:e.input.income,recommend_code:e.input.referee}).then(function(e){a.hide(),e.code==c.request.SUCCESS&&e.status==c.response.SUCCESS?(i.autoHide(e.message),r(function(){t.path("signin").replace()},2e3)):i.autoHide(e.message)})})}}]),angular.module("Love").controller("uploadController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s){var i,a;e.$on("flow::filesSubmitted",function(e,o){o.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return a=e,e}),i=(new Date).getTime()+a,o.opts.target=s.url+"/app/UserCenter/updatePic",o.opts.testChunks=!1,o.opts.fileParameterName="image_01",o.opts.query={invoke:"h5",filename:i},r.show(),o.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_success",{message:i}),r.hide()})}]),angular.module("Love").controller("signinController",["$scope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a){e.input={telephone:"",password:""},e.clear=function(){e.input.password=""},e.ajaxForm=function(){s.show(),r.rsa_key().then(function(o){var t=new JSEncrypt,r=o;t.setPrivateKey(r);var n=t.encrypt(e.input.password);e.input.password=n}).then(function(){r.signin({telephone:e.input.telephone,password:e.input.password}).then(function(r){s.hide(),r.code==a.request.SUCCESS&&r.status==a.response.SUCCESS?(n.autoHide(r.message),e.input.password="",i.set("token",r.token),o(function(){t.path("ta").replace()},2e3)):(e.input.password="",n.autoHide(r.message))})})}}]),angular.module("Love").controller("showController",["$scope","$rootScope","$timeout","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a,u){e.input={},i.show(),n.query_userinfo().then(function(o){i.hide(),o.code==u.request.SUCCESS&&o.status==u.response.SUCCESS?e.input.user_show=o.Result.UserInfo.heart:s.autoHide(o.message)}),e.ajaxForm=function(){i.show(),n.save_inner_word({content:e.input.user_show}).then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?t(function(){o.back()},2e3):s.autoHide(e.message)})}}]),angular.module("Love").controller("servicesController",["$scope","errorServices","toastServices","localStorageService","config",function(e){console.log("dd"),e.step=1,e.show_step=function(o){e.step=o}}]),angular.module("Love").controller("sendMessagesController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s){e.messages=[],e.page={pn:1,page_size:5,message:"点击加载更多"},e.loadMore=function(){e.no_more||(r.show(),e.page.message="正在加载...",o.query_send_messages(e.page).then(function(o){r.hide(),e.page.message="点击加载更多",o.code==s.request.SUCCESS&&o.status==s.response.SUCCESS?(e.messages=e.messages.concat(o.Result.ChatUsers.list),e.no_more=e.messages.length==o.Result.ChatUsers.totalRow?!0:!1):e.page.message="加载完成，共加载"+e.messages.length+"条记录",e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore()}]),angular.module("Love").controller("searchController",["$scope","$routeParams","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i){e.loves=[],e.page={pn:1,page_size:5,message:"点击加载更多",heights:o.heights,ages:o.ages,incomes:o.incomes,edus:o.edus,merrys:o.merrys},e.get_tag=function(e){return e.split("#")},e.loadMore=function(){e.no_more||(n.show(),e.page.message="正在加载...",t.query_loves(e.page).then(function(o){n.hide(),e.page.message="点击加载更多",o.code==i.request.SUCCESS&&o.status==i.response.SUCCESS?(e.loves=e.loves.concat(o.Result.Users.list),e.no_more=e.loves.length==o.Result.Users.totalRow?!0:!1):r.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.loves.length+"条记录"),e.page.pn++}))},e.loadMore()}]),angular.module("Love").controller("searchConditionalController",["$scope","$rootScope","$location","$timeout","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s){e.input={},s.query_province().then(function(o){e.provinces=o.province,e.input.province=e.provinces[0]}),e.$watch("input.province",function(o){void 0!==o&&e.query_city(o)}),e.query_city=function(o){s.query_city().then(function(t){e.cities=t[o],e.input.city=e.cities[0]})};for(var i=145,a=[],u=0;60>u;u++)i++,a.push(i+"cm");e.heights=a,e.input.height=e.heights[0],e.input.age="20-22岁",e.input.degree="初中以上",e.input.marry="未婚",e.input.income="5000元以下",e.search=function(){t.path("search").search({heights:e.input.height,ages:e.input.age,incomes:e.input.income,marrys:e.input.marry,edus:e.input.degree}).replace()}}]),angular.module("Love").controller("recommendationController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("realnameAuthenController",["$scope","$rootScope","userServices","$timeout","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a){e.input={},e.ajaxForm=function(){s.show(),t.realname_authen({realname:e.input.realname,ID_num:e.input.id,ID_front_image:e.input.front,ID_back_image:e.input.back}).then(function(e){s.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?(n.autoHide(e.message),$timout(function(){o.back()},2e3)):n.autoHide(e.message)})},e.$on("upload_front_success",function(o,t){e.input.front=t.message}),e.$on("upload_back_success",function(o,t){e.input.back=t.message})}]),angular.module("Love").controller("uploadFrontController",["$scope","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n){var s,i;e.$on("flow::filesSubmitted",function(e,o){o.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return i=e,e}),s=(new Date).getTime()+i,o.opts.target=n.url+"/app/UserCenter/updatePic",o.opts.testChunks=!1,o.opts.fileParameterName="image_01",o.opts.query={invoke:"h5",token:r.get("token"),filename:s},t.show(),o.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_front_success",{message:s}),t.hide()})}]),angular.module("Love").controller("uploadBackController",["$scope","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n){var s,i;e.$on("flow::filesSubmitted",function(e,o){o.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return i=e,e}),s=(new Date).getTime()+i,o.opts.target=n.url+"/app/UserCenter/updatePic",o.opts.testChunks=!1,o.opts.fileParameterName="image_01",o.opts.query={invoke:"h5",token:r.get("token"),filename:s},t.show(),o.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_back_success",{message:s}),t.hide()})}]),angular.module("Love").controller("phoneAuthenController",["$scope","$timeout","$rootScope","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a){e.input={},e.ajaxForm=function(){s.show(),r.phone_authen({telephone:e.input.telephone,tel_code:e.input.smscode}).then(function(e){s.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?(n.autoHide(e.message),o(function(){t.back()},2e3)):n.autoHide(e.message)})},e.countdown={message:"获取验证码"},e.countdown.callback=function(){s.show(),r.get_smscode({telephone:e.input.telephone}).then(function(o){s.hide(),o.code==a.request.SUCCESS&&o.status==a.response.SUCCESS?n.autoHide(o.message):(e.countdown.reset=!0,n.autoHide(o.message))})},e.modal={status:0},e.open_modal=function(){e.modal.status=3},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("myloveController",["$scope","$location","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a){e.loves=[],e.page={pn:1,page_size:5,message:"点击加载更多",love_type:t.type},e.loadMore=function(){e.no_more||(s.show(),e.page.message="正在加载...",r.query_lovers(e.page).then(function(o){s.hide(),e.page.message="点击加载更多",o.code==a.request.SUCCESS&&o.status==a.response.SUCCESS?(e.loves=e.loves.concat(o.Result.LoveEachOthers.list),e.no_more=e.loves.length==o.Result.LoveEachOthers.totalRow?!0:!1):n.autoHide("服务器错误"),e.no_more&&(e.page.message="没有喜欢的人/喜欢你的人"),e.page.pn++}))},e.loadMore(),e.local_go=function(e,t){t.preventDefault(),t.stopPropagation(),o.path("detail").search({id:e.loved_user_id})},e.unlike=function(e,o){o.preventDefault(),o.stopPropagation(),s.show(),r.unlike({id:e.loved_user_id}).then(function(e){s.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?n.autoHide(e.message):n.autoHide(e.message)})}}]),angular.module("Love").controller("messagesController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("messageController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("memberController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("member2Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("member1Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("meController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s){e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0},r.show(),o.query_basicinfo().then(function(o){r.hide(),o.code==s.request.SUCCESS&&o.status==s.response.SUCCESS?e.user=o.Result.BaseInfo:t.autoHide(o.message)}),e.get_images=function(e){return e?e.split("#"):[]}}]),angular.module("Love").controller("matingController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("manualAuthenController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("loversController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("indexController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("expressController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("detailController",["$scope","$routeParams","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a,u){e.input={},i.show(),n.query_userinfo({type:"2",ta_user_id:o.id}).then(function(o){i.hide(),o.code==u.request.SUCCESS&&o.status==u.response.SUCCESS?(e.user=o.Result.UserInfo,e.input.covers=e.user.image_other.split("#").filter(function(e){return""!=e}),e.input.avatar=e.user.image_01,e.input.heart=e.user.heart,e.input.gender=e.genders[e.user.sex],e.input.height=e.user.height,e.input.income=e.user.income,e.input.province=e.user.province,t(function(){e.input.city=e.user.city},2e3),e.input.degree=e.user.edu,e.input.marry=e.user.marry,e.input.child=e.user.child,e.input.is_buy_house=e.user.is_buy_house,e.input.house=e.user.buy_house,e.input.is_buy_car=e.user.is_buy_car,e.input.job=e.user.job,e.input.age_1=e.user.UserOther.choose_mate_age,e.input.height_1=e.user.UserOther.choose_mate_height,e.input.income_1=e.user.UserOther.choose_mate_income,e.input.province_1=e.user.UserOther.choose_mate_province,e.input.city_1=e.user.UserOther.choose_mate_city,e.input.degree_1=e.user.UserOther.choose_mate_edu,e.input.marry_1=e.user.UserOther.choose_mate_marry,e.input.child_1=e.user.UserOther.choose_mate_has_child,e.input.house_1=e.user.UserOther.choose_mate_has_house,e.input.car_1=e.user.UserOther.choose_mate_has_car,e.input.province_2=e.user.UserOther.dossier_province,e.input.city_2=e.user.UserOther.dossier_city,e.input.nation=e.user.UserOther.dossier_nation,e.input.shuxiang=e.user.UserOther.dossier_shuxiang,e.input.xinzuo=e.user.UserOther.dossier_xinzuo,e.input.blood=e.user.UserOther.dossier_xuexing,e.input.body=e.user.UserOther.dossier_tixing,e.input.weight=e.user.UserOther.dossier_tizhong,e.input.score=e.user.UserOther.dossier_xiangmao_zp,e.input.region=e.user.UserOther.dossier_region,e.input.smoke=e.user.UserOther.dossier_smoke,e.input.drink=e.user.UserOther.dossier_drink,e.input.school=e.user.UserOther.edu_job_school,e.input.major=e.user.UserOther.edu_job_profession,e.input.position=e.user.UserOther.edu_job_zhiwu,e.input.company_nature=e.user.UserOther.edu_job_nature_company,e.input.work_status=e.user.UserOther.edu_job_work_status,e.input.language=e.user.UserOther.edu_job_master_language,e.input.about_money=e.user.UserOther.attitude_money,e.input.about_love=e.user.UserOther.attitude_shiye_love,e.input.about_sex=e.user.UserOther.attitude_sex,e.input.marry_plan=e.user.UserOther.love_marry_plan,e.input.housework=e.user.UserOther.love_home_work,e.input.babys=e.user.UserOther.love_want_child,e.input.live_with_parent=e.user.UserOther.love_want_fw_zhu,e.input.couple=e.user.UserOther.love_spouse_pattern,e.input.alone_with=e.user.UserOther.love_live_pattern,e.input.yearing=e.user.UserOther.life_xiangwang_thing,e.input.like_book=e.user.UserOther.life_love_book,e.input.like_film=e.user.UserOther.life_love_movie,e.input.focus_topic=e.user.UserOther.life_guanzhu_theme,e.input.proud=e.user.UserOther.life_proud_thing,e.input.cooking=e.user.UserOther.life_cooking,e.input.had_been=e.user.UserOther.life_go_space,e.input.work_place=e.user.UserOther.life_circle_work_place,e.input.life_place=e.user.UserOther.life_circle_life_place):s.autoHide(o.message)}),e.get_images=function(e){return e?e.split("#"):[]},e.get_tags=function(e){return e?e.split("#"):void 0},e.genders=["女","男"],e.like=function(){i.show(),n.like({ta_user_id:o.id}).then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?s.autoHide(e.message):s.autoHide(e.message)})},e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0,i.show(),n.yue({ta_user_id:o.id}).then(function(e){i.hide(),e.code==u.request.SUCCESS&&e.status==u.response.SUCCESS?r.path("message").search():s.autoHide(e.message)})}}]),angular.module("Love").controller("createAppointmentController",["$scope","errorServices","toastServices","localStorageService","config",function(e){console.log("dd"),e.step=1,e.show_step=function(o){e.step=o}}]),angular.module("Love").controller("chatController",["$scope","$routeParams","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i){e.input={},e.chats=[],e.page={pn:1,page_size:500,message:"点击加载更多",receive_user_id:o.id},e.loadMore=function(){e.no_more||(n.show(),e.page.message="正在加载...",t.query_message_by_id(e.page).then(function(o){n.hide(),e.page.message="点击加载更多",o.code==i.request.SUCCESS&&o.status==i.response.SUCCESS?(e.chats=e.chats.concat(o.Result.ChatMessages.list),e.no_more=e.chats.length==o.Result.ChatMessages.totalRow?!0:!1):r.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.send=function(){n.show(),t.send({receive_user_id:e.chats[0].receive_user_id,content:e.input.content}).then(function(o){n.hide(),o.code==i.request.SUCCESS&&o.status==i.response.SUCCESS?(e.chats.push({is_read:"",receive_nickname:"",current_image_01:"4131734_110157044032_22.jpg",receive_image_01:"4131734_110157044032_22.jpg",user_id:1,send_receive_time:"2016-02-29 13:51:00.0",chat_message_id:e.chats[0].user_id,receive_user_id:e.chats[0].receive_user_id,content:e.input.content,post_time:"2016-02-29 13:51:00",current_nickname:"小明"}),e.input.content=""):r.autoHide(o.message)})}}]),angular.module("Love").controller("chargeController",["$scope","$routeParams","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a){s.show(),r.query_vips().then(function(o){s.hide(),o.code==a.request.SUCCESS&&o.status==a.response.SUCCESS?(e.vips=o.Result.VipPrices,e.vips.vip=e.vips[0].vip_price_id):n.autoHide(o.message)}),e.step=1,e.show_step=function(o){e.step=o},e.change_vips=function(o){e.vips.vip=o},e.change_pays=function(o){e.pays.pay=o},e.pays={pay:"微信支付"}}]),angular.module("Love").controller("basicController",["$scope","$timeout","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s,i,a){e.input={},s.show(),t.query_userinfo({type:"1"}).then(function(t){s.hide(),t.code==a.request.SUCCESS&&t.status==a.response.SUCCESS?(e.user=t.Result.UserInfo,e.input.covers=e.user.image_other.split("#").filter(function(e){return""!=e}),e.input.avatar=e.user.image_01,e.input.heart=e.user.heart,e.input.gender=e.genders[e.user.sex],e.input.height=e.user.height,e.input.income=e.user.income,e.input.province=e.user.province,o(function(){e.input.city=e.user.city},2e3),e.input.degree=e.user.edu,e.input.marry=e.user.marry,e.input.child=e.user.child,e.input.is_buy_house=e.user.is_buy_house,e.input.house=e.user.buy_house,e.input.is_buy_car=e.user.is_buy_car,e.input.job=e.user.job,e.input.age_1=e.user.UserOther.choose_mate_age,e.input.height_1=e.user.UserOther.choose_mate_height,e.input.income_1=e.user.UserOther.choose_mate_income,e.input.province_1=e.user.UserOther.choose_mate_province,e.input.city_1=e.user.UserOther.choose_mate_city,e.input.degree_1=e.user.UserOther.choose_mate_edu,e.input.marry_1=e.user.UserOther.choose_mate_marry,e.input.child_1=e.user.UserOther.choose_mate_has_child,e.input.house_1=e.user.UserOther.choose_mate_has_house,e.input.car_1=e.user.UserOther.choose_mate_has_car,e.input.province_2=e.user.UserOther.dossier_province,e.input.city_2=e.user.UserOther.dossier_city,e.input.nation=e.user.UserOther.dossier_nation,e.input.shuxiang=e.user.UserOther.dossier_shuxiang,e.input.xinzuo=e.user.UserOther.dossier_xinzuo,e.input.blood=e.user.UserOther.dossier_xuexing,e.input.body=e.user.UserOther.dossier_tixing,e.input.weight=e.user.UserOther.dossier_tizhong,e.input.score=e.user.UserOther.dossier_xiangmao_zp,e.input.region=e.user.UserOther.dossier_region,e.input.smoke=e.user.UserOther.dossier_smoke,e.input.drink=e.user.UserOther.dossier_drink,e.input.school=e.user.UserOther.edu_job_school,e.input.major=e.user.UserOther.edu_job_profession,e.input.position=e.user.UserOther.edu_job_zhiwu,e.input.company_nature=e.user.UserOther.edu_job_nature_company,e.input.work_status=e.user.UserOther.edu_job_work_status,e.input.language=e.user.UserOther.edu_job_master_language,e.input.about_money=e.user.UserOther.attitude_money,e.input.about_love=e.user.UserOther.attitude_shiye_love,e.input.about_sex=e.user.UserOther.attitude_sex,e.input.marry_plan=e.user.UserOther.love_marry_plan,e.input.housework=e.user.UserOther.love_home_work,e.input.babys=e.user.UserOther.love_want_child,e.input.live_with_parent=e.user.UserOther.love_want_fw_zhu,e.input.couple=e.user.UserOther.love_spouse_pattern,e.input.alone_with=e.user.UserOther.love_live_pattern,e.input.yearing=e.user.UserOther.life_xiangwang_thing,e.input.like_book=e.user.UserOther.life_love_book,e.input.like_film=e.user.UserOther.life_love_movie,e.input.focus_topic=e.user.UserOther.life_guanzhu_theme,e.input.proud=e.user.UserOther.life_proud_thing,e.input.cooking=e.user.UserOther.life_cooking,e.input.had_been=e.user.UserOther.life_go_space,e.input.work_place=e.user.UserOther.life_circle_work_place,e.input.life_place=e.user.UserOther.life_circle_life_place):n.autoHide(t.message)
}),e.input.covers=[],e.$on("upload_cover_success",function(o,t){e.input.covers.push(t.message)}),e.remove_cover=function(o){e.input.covers=e.input.covers.filter(function(e){return o!=e})},e.$on("upload_avatar_success",function(o,t){e.input.avatar=t.message}),e.get_images=function(e){return e?e.split("#"):[]},e.get_tags=function(e){return e?e.split("#"):void 0},e.genders=["女","男"];for(var u=145,c=[],l=0;60>l;l++)u++,c.push(u+"cm");e.heights=c,e.incomes=["5000元以下","5000-8000元","8000-10000元","10000-20000元","20000-30000元","30000-40000元","40000-50000元","50000元以上"],r.query_province().then(function(o){e.provinces=o.province,e.input.province=e.provinces[0]}),e.$watch("input.province",function(o){void 0!==o&&""!=o&&e.query_city(o)}),e.query_city=function(o){r.query_city().then(function(t){e.cities=t[o],e.input.city=e.cities[0]})},e.$watch("input.province_1",function(o){void 0!==o&&""!=o&&e.query_city_1(o)}),e.query_city_1=function(o){r.query_city().then(function(t){e.cities=t[o],e.input.city=e.cities[0]})},e.$watch("input.province_2",function(o){void 0!==o&&""!=o&&e.query_city_2(o)}),e.query_city_2=function(o){r.query_city().then(function(t){e.cities=t[o],e.input.city=e.cities[0]})},e.degrees=["初中以上","高中以上","中专以上","大专以上","本科以上","硕士以上","博士以上"],e.marrys=["未婚","已婚","离异","丧偶"],e.children=["没有","有,和我住一起","有,不和我住一起","有,有时和我住一起"],e.houses=["以后再告诉你","已购房(有房贷)","与父母同住","租房","已购房(无房贷)","住单位房","住亲朋家","需要时购置"],e.cars=["已购车","未购车","单位用车","需要时购置"];var p=20,g=[];g.push("20岁以下");for(var l=0;60>l;l+=2){var d=p+2;g.push(p+"-"+d+"岁"),p=d}g.push("80岁以上"),e.ages=g,e.input.height_1="",e.input.income_1="",e.input.province_1="",e.input.city_1="",e.input.degree_1="",e.input.child_1="",e.input.house_1="",e.input.province_2="",e.input.city_2="",e.nations=["汉","满族","藏族","回族","维吾尔族","苗族","壮族","朝鲜族","其他民族"],e.input.shuxing="",e.input.xinzuo="",e.bloods=["A型","B型","AB型","O型","其他"],e.bodys=["很瘦","较瘦","苗条","匀称","高挑","丰满","健壮","较胖","胖"];var m=40,_=[];_.push("40以下");for(var l=0;60>l;l+=2){var d=m+2;_.push(m+"-"+d+"岁"),m=d}_.push("100公斤以上"),e.weights=_,e.scores=["1","2","3","4","5","6","7","8","9","10"],e.regions=["无神论","佛教","道教","基督教","天主教","儒教","犹太教","回教","伊斯兰教","其他"],e.smokes=["不吸,很反感","不吸,但不反感","社交时偶尔吸烟","烟不离手"],e.drinks=["不喝酒","社交需要喝","兴致时小酌","酒不离口"],e.input.school="",e.majors=["计算机类","电子信息类","中文类","经济学类","金融学类","管理类","市场营销类","法学类","教育类","社会学类","历史类","哲学类","艺术类","图书馆类","情报档案类","政治类","数学类","统计类","物理类","化学类","生物类","食品类","医学类","环境了类","地理类","建筑类","测绘类","电气类","机械类","其他"],e.positions=["计算机/互联网","电子电器/通讯技术","机械/仪表仪器","销售","客服及技术支持","财务/审计/税务","证券/金融/投资/银行","保险","生产/营运","质量/安全管理","工程/能源","贸易/采购","物流/仓储/运输","技工","化工/环保","生物/制药/医疗器械","广告","市场/公关","人力资源","行政/后勤","律师/法务/合规","科研","商业零售服务","其他"],e.company_natures=["政府机关","事业单位","外企企业","世界500强","上市公司","国有企业","私营企业","其他"],e.industries=["计算机/网络","科研/教育","公关/广告","传媒出版","营销/市场/策划","房地产/建筑业","装饰/装潢","其他"],e.work_statuses=["轻松稳定","朝九晚五","偶尔加班","经常加班","偶尔出差","经常出差","常有应酬","工作时间自由"],e.languages=["中文","英语","法语","日语","韩语","德语","意大利语","西班牙语","阿拉伯语","其他"],e.input.about_money,e.input.about_sex="",e.input.about_love="",e.input.marry_plan="",e.houseworks=["任劳任怨","希望对方承担家务","一起分工合作","看各自闲忙，协商分担"],e.babys=["想","不想","还没想好","视情况而定","其他"],e.live_with_parents=["愿意","不愿意","视情况而定"],e.input.couple="",e.input.alone_with="",e.input.yearing="",e.input.like_book="",e.input.like_film="",e.input.focus_topic="",e.input.proud="",e.cookings=["色香味俱全","能做几样可口的小菜","不太会，但愿为心爱的的人学","其他"],e.input.had_been="",e.input.work_place="",e.input.life_place="",e.input.offen_go="",e.input.company="",e.like=function(){s.show(),t.like().then(function(e){s.hide(),e.code==a.request.SUCCESS&&e.status==a.response.SUCCESS?n.autoHide(e.message):n.autoHide(e.message)})}}]),angular.module("Love").controller("uploadCoversController",["$scope","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n){var s,i;e.$on("flow::filesSubmitted",function(e,o){o.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return i=e,e}),s=(new Date).getTime()+i,o.opts.target=n.url+"/app/UserCenter/updatePic",o.opts.testChunks=!1,o.opts.fileParameterName="image_01",o.opts.query={invoke:"h5",token:r.get("token"),filename:s},t.show(),o.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_cover_success",{message:s}),t.hide()})}]),angular.module("Love").controller("uploadAvatarController",["$scope","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n){var s,i;e.$on("flow::filesSubmitted",function(e,o){o.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return i=e,e}),s=(new Date).getTime()+i,o.opts.target=n.url+"/app/UserCenter/updatePic",o.opts.testChunks=!1,o.opts.fileParameterName="image_01",o.opts.query={invoke:"h5",token:r.get("token"),filename:s},t.show(),o.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_avatar_success",{message:s}),t.hide()})}]),angular.module("Love").controller("authenController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s){r.show(),o.query_userinfo({type:"1"}).then(function(o){r.hide(),o.code==s.request.SUCCESS&&o.status==s.response.SUCCESS?e.user=o.Result.UserInfo:t.autoHide(o.message)})}]),angular.module("Love").controller("appointmentController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment2SureController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.modal={status:0},e.info="缴纳约会保证金，同意和咚起大起共同约会",e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("appointment2RefuseController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment2Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment1SureController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,o,t,r,n,s){e.mettings=[],e.page={pn:1,page_size:1,message:"点击加载更多"},e.loadMore=function(){e.no_more||(r.show(),e.page.message="正在加载...",o.query_metting(e.page).then(function(o){r.hide(),e.page.message="点击加载更多",o.code==s.request.SUCCESS&&o.status==s.response.SUCCESS?(e.mettings=e.mettings.concat(o.result.list),e.no_more=e.mettings.length==o.result.total_result.totalRow?!0:!1):t.autoHide("服务器错误"),e.no_more&&(e.page.message="没有了"),e.page.pn++}))},e.loadMore(),e.modal={status:0},e.info="双方确认赴约后，保证金将退回",e.complaint="请联系官方客服，进行投诉维权",e.open_overlay=function(){e.modal.status=1},e.open_show=function(){e.modal.status=2},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("appointment1RefuseController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment1Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("accountController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").constant("config",{url:"http://121.40.201.53",imageUrl:"http://121.40.201.53/files/image?name=",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{invoke:"h5",app_sign:"123456"},interceptor:["account","appointment","appointment1","appointment2","authen","basic","chat","create_appointment","index","lovers","manual_authen","mating","member","member1","member2","messages","message","mylove","phone_authen","realname_authen","search","services","signin","signup","single","search_conditional","send_messages","appointment1_refuse","appointment1_sure","appointment2_refuse","appointment2_sure","detail","charge","me","ta","tags","withdrawals","recommendation","visitors","show"]});
//# sourceMappingURL=app.min.js.map
