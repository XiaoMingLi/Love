angular.module("Love",["ngRoute","LocalStorageModule","flow"]).config(["$routeProvider","$httpProvider","$locationProvider","localStorageServiceProvider","config",function(e,o,r,t,n){angular.forEach(n.interceptor,function(o){var r=o.replace(/_[a-z]/g,function(e){return e.split("_")[1].toUpperCase()});r+="Controller",e.when("/"+o,{templateUrl:"templates/"+o+".html",reloadOnSearch:!1,controller:r,resolve:{user:["$q","$location","localStorageService",function(e,r,t){var n=[],a=e.defer();return n.includes(o)&&!t.get("token")?(a.reject(),r.path("/signin").replace(),void 0):(a.resolve(),a.promise)}]}})}),e.otherwise("/ta"),o.defaults.useXDomain=!0,o.defaults.withCredentials=!0,delete o.defaults.headers.common["X-Requested-With"],t.setStorageCookie(.02),o.interceptors.push("tokenInterceptor")}]).run(["appServices",function(){}]),angular.module("Love").controller("withdrawalsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("visitorsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("visitorsController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("tagsController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.tags=[{name:"看电影",select:!1},{name:"听歌",select:!1},{name:"养花",select:!1},{name:"跑步",select:!1},{name:"网购",select:!1},{name:"足球",select:!1},{name:"篮球",select:!1},{name:"爬山",select:!1},{name:"摄影",select:!1},{name:"瑜伽",select:!1},{name:"游泳",select:!1}],e.select=function(e){e.select=!e.select}}]),angular.module("Love").controller("taController",["$scope","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,r,t,n,a){e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.loves=[],e.page={pn:1,page_size:5,message:"点击加载更多"},e.loadMore=function(){e.no_more||(t.show(),e.page.message="正在加载...",o.query_loves(e.page).then(function(o){t.hide(),e.page.message="点击加载更多",o.code==a.request.SUCCESS&&o.status==a.response.SUCCESS?(console.log(o),e.loves=e.loves.concat(o.Result.Users.list),e.no_more=e.loves.length==o.Result.Users.totalRow?!0:!1):r.autoHide("服务器错误"),e.no_more&&(e.page.message="加载完成，共加载"+e.loves.length+"条记录"),e.page.pn++}))},e.loadMore()}]),angular.module("Love").controller("singleController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("signupController",["$scope","$rootScope","$location","$timeout","userServices","loveServices","errorServices","toastServices","localStorageService","config",function(e,o,r,t,n,a,c,l,s,i){e.step=1,e.input={},e.show_step=function(o){e.step=o},e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.get_smscode=function(){l.show(),n.get_smscode({telephone:e.input.telephone}).then(function(e){l.hide(),e.code==i.request.SUCCESS&&e.status==i.response.SUCCESS?c.autoHide(e.message):c.autoHide(e.message)})},e.$on("upload_success",function(o,r){e.input.filename=r.message}),e.input.gender=1,e.select_gender=function(o){e.input.gender=o},a.query_province().then(function(o){e.provinces=o.province,e.input.province=e.provinces[0]}),e.$watch("input.province",function(o){void 0!==o&&e.query_city(o)}),e.query_city=function(o){a.query_city().then(function(r){e.cities=r[o],e.input.city=e.cities[0]})};for(var u=145,m=[],p=0;60>p;p++)u++,m.push(u+"cm");e.heights=m,e.input.height=e.heights[0],e.input.degree="初中以上",e.input.marry="未婚",e.input.income="5000元以下",e.ajaxForm=function(){l.show(),n.rsa_key().then(function(o){var r=new JSEncrypt,t=o;r.setPrivateKey(t);var n=r.encrypt(e.input.password);e.input.password=n}).then(function(){n.signup({fileName:e.input.filename,telephone:e.input.telephone,password:e.input.password,tel_code:e.input.sms_code,sex:e.input.gender,nickname:e.input.nickname,province:e.input.province,city:e.input.city,height:e.input.height,edu:e.input.degree,marry:e.input.marry,income:e.input.income,recommend_code:e.input.referee}).then(function(e){l.hide(),e.code==i.request.SUCCESS&&e.status==i.response.SUCCESS?(c.autoHide(e.message),t(function(){r.path("signin").replace()},2e3)):c.autoHide(e.message)})})}}]),angular.module("Love").controller("uploadController",["$scope","userServices","errorServices","toastServices","localStorageService","config",function(e,o,r,t,n,a){var c,l;e.$on("flow::filesSubmitted",function(e,o){o.files[0].name.replace(/.png|.jpg|.jpeg|.gif/g,function(e){return l=e,e}),c=(new Date).getTime()+l,o.opts.target=a.url+"/app/UserCenter/updatePic",o.opts.testChunks=!1,o.opts.fileParameterName="image_01",o.opts.query={invoke:"h5",filename:c},t.show(),o.upload()}),e.$on("flow::fileAdded",function(){}),e.$on("flow::fileSuccess",function(){e.$flow.files=[],e.$emit("upload_success",{message:c}),t.hide()})}]),angular.module("Love").controller("signinController",["$scope","$timeout","$location","userServices","errorServices","toastServices","localStorageService","config",function(e,o,r,t,n,a,c,l){e.input={telephone:"",password:""},e.clear=function(){e.input.password=""},e.ajaxForm=function(){a.show(),t.rsa_key().then(function(o){var r=new JSEncrypt,t=o;r.setPrivateKey(t);var n=r.encrypt(e.input.password);e.input.password=n}).then(function(){t.signin({telephone:e.input.telephone,password:e.input.password}).then(function(t){a.hide(),t.code==l.request.SUCCESS&&t.status==l.response.SUCCESS?(n.autoHide(t.message),e.input.password="",c.set("token",t.token),o(function(){r.path("ta").replace()},2e3)):n.autoHide(t.message)})})}}]),angular.module("Love").controller("servicesController",["$scope","errorServices","toastServices","localStorageService","config",function(e){console.log("dd"),e.step=1,e.show_step=function(o){e.step=o}}]),angular.module("Love").controller("sendMessagesController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("searchController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("searchConditionalController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("recommendationController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("realnameAuthenController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("phoneAuthenController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.modal={status:0},e.open_modal=function(){e.modal.status=3},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("myloveController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("messagesController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("messageController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("memberController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("member2Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("member1Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("meController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("matingController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("manualAuthenController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("loversController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("indexController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("expressController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("detailController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.modal={status:0},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("createAppointmentController",["$scope","errorServices","toastServices","localStorageService","config",function(e){console.log("dd"),e.step=1,e.show_step=function(o){e.step=o}}]),angular.module("Love").controller("chatController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("chargeController",["$scope","$routeParams","errorServices","toastServices","localStorageService","config",function(e){console.log("dd"),e.step=1,e.show_step=function(o){e.step=o},e.change_vips=function(o){e.vips.vip=o},e.vips={vip:"1个月VIP"},e.change_pays=function(o){e.pays.pay=o},e.pays={pay:"微信支付"}}]),angular.module("Love").controller("basicController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("authenController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointmentController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment2SureController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.modal={status:0},e.info="缴纳约会保证金，同意和咚起大起共同约会",e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("appointment2RefuseController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment2Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment1SureController",["$scope","errorServices","toastServices","localStorageService","config",function(e){e.modal={status:0},e.info="双方确认赴约后，保证金将退回",e.complaint="请联系官方客服，进行投诉维权",e.open_overlay=function(){e.modal.status=1},e.open_show=function(){e.modal.status=2},e.open_modal=function(){e.modal.status=1},e.cancel_modal=function(){e.modal.status=0},e.confirm_modal=function(){e.modal.status=0}}]),angular.module("Love").controller("appointment1RefuseController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("appointment1Controller",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").controller("accountController",["$scope","errorServices","toastServices","localStorageService","config",function(){}]),angular.module("Love").factory("userServices",["$rootScope","$http","apiServices","localStorageService","config",function(e,o,r,t,n){return{rsa_key:function(e){return o({url:"key/private_key.pem",method:"GET",params:angular.extend({},n.common_params,e)}).then(function(e){return e.data})},signin:function(e){return o({url:n.url+"/app/UserCenter/Login",method:"GET",params:angular.extend({},n.common_params,e)}).then(function(e){return e.data})},signup:function(e){return o({url:n.url+"/app/UserCenter/RegistTel",method:"GET",params:angular.extend({},n.common_params,e)}).then(function(e){return e.data})},forget:r._get(angular.extend({},n.common_params,{url:n.url+"api_url"})),get_smscode:function(e){return o({url:n.url+"/app/UserCenter/getRegisterCode",method:"GET",params:angular.extend({},n.common_params,e)}).then(function(e){return e.data})},reset:r._get(angular.extend({},n.common_params,{url:n.url+"api_url"})),query_basicinfo:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),realname_authen:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),phone_authen:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),like:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),unlike:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),query_messages:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),query_message_by_id:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),block:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),charge:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),query_visitors:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),query_lovers:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),query_mydate:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),query_mylovers:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),confirm_adate:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")})),report:r._get(angular.extend({},n.common_params,{url:n.url+"api_url",token:t.get("token")}))}}]),angular.module("Love").factory("tokenInterceptor",["$location","$q","localStorageService","errorServices","config",function(e,o,r,t,n){return{request:function(e){return e},requestError:function(){},response:function(t){var a=o.defer();return t.config.url.indexOf(".html")>0?t:t.data.respcode==n.request.TOKEN_INVALID?(console.log("TOKEN_INVALID"),r.remove("token"),e.path("/signIn").replace(),a.promise):t},responseError:function(e){var r=o.defer();return t.requestError(e.data,e.status,e.headers,e.config),r.promise}}}]),angular.module("Love").factory("toastServices",function(){return{show:function(){$(".toast").show()},hide:function(){$(".toast").hide()},start:function(){NProgress.start()},done:function(){NProgress.done()}}}),angular.module("Love").factory("loveServices",["$http","apiServices","localStorageService","config",function(e,o,r,t){return{query_loves:function(o){return e({url:t.url+"/app/Home/taList",method:"GET",params:angular.extend({},t.common_params,o)}).then(function(e){return e.data})},query_love_by_id:o._get(angular.extend({},t.common_params,{url:t.url+"api_url"})),search:o._get(angular.extend({},t.common_params,{url:t.url+"api_url"})),query_province:function(o){return e({url:"city/province.json",method:"GET",params:angular.extend({},t.common_params,o)}).then(function(e){return e.data})},query_city:function(o){return e({url:"city/city.json",method:"GET",params:angular.extend({},t.common_params,o)}).then(function(e){return e.data})}}}]),angular.module("Love").factory("errorServices",["$rootScope","$timeout","toastServices",function(e,o,r){return{show:function(o){e.error_msg=o,$(".error-msg").show()},hide:function(){e.error_msg="",$(".error-msg").hide()},autoHide:function(r){e.error_msg=r,$(".error-msg").show(),o(function(){e.error_msg="",$(".error-msg").hide()},3e3)},requestError:function(e,o,t,n){switch(r.hide(),o){case 0:this.autoHide("连接超时");break;case 500:case 501:case 502:case 503:case 504:case 505:case 506:case 507:case 509:case 510:this.autoHide("服务器连接出错")}console.log("onRequestError output status, data, headers, config"),console.log(o),console.log(e),console.log(t),console.log(n),console.log("onRequestError end")}}}]),angular.module("Love").factory("appServices",["$rootScope","$window","$location","errorServices","toastServices",function(e,o,r,t,n){var a=function(){},c=function(e,o,r){n.hide(),t.hide(),s(e,o,r)},l=function(){},s=function(){};return{init:function(){e.$on("$routeChangeStart",a),e.$on("$routeChangeSuccess",c),e.$on("$routeChangeError",l),e.go=function(e){r.path(e)},e.back=function(){o.history.back()}}}}]),angular.module("Love").factory("apiServices",["$http",function(e){return{_get:function(o){return function(r){e({url:o.url,method:"GET",params:angular.extend({},o,r)}).then(function(e){return e.data})}},_post:function(o){return function(r){e({url:o.url,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e){var o=[];for(var r in e)o.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return o.join("&")},data:angular.extend({},o,r)}).then(function(e){return e.data})}}}}]),angular.module("Love").directive("dribehanceHeader",function(){return{restrict:"E",templateUrl:"templates/header.html",scope:{title:"=",backAction:"="},link:function(){}}}),angular.module("Love").directive("dribehanceFooter",function(){return{restrict:"E",templateUrl:"templates/footer.html",scope:{active:"="},link:function(){}}}),angular.module("Love").constant("config",{url:"http://121.40.201.53",imageUrl:"http://121.40.201.53/files/image?name=",request:{SUCCESS:"200",TOKEN_INVALID:"405"},response:{SUCCESS:1},common_params:{invoke:"h5",app_sign:"123456"},interceptor:["account","appointment","appointment1","appointment2","authen","basic","chat","create_appointment","index","lovers","manual_authen","mating","member","member1","member2","messages","message","mylove","phone_authen","realname_authen","search","services","signin","signup","single","search_conditional","send_messages","appointment1_refuse","appointment1_sure","appointment2_refuse","appointment2_sure","detail","charge","me","ta","tags","withdrawals","recommendation","visitors"]});
//# sourceMappingURL=app.min.js.map
